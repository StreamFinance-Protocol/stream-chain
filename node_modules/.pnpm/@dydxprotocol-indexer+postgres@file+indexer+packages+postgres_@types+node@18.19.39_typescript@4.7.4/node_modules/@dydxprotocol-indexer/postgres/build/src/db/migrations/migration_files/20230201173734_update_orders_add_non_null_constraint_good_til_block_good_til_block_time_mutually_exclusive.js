"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.down = exports.up = void 0;
// Add a constraint to the `orders` table to ensure that one of `goodTilBlock` and
// `goodTilBlockTime` is non-null for each row, but not both.
async function up(knex) {
    return knex
        .schema
        .raw(`
      ALTER TABLE "orders" ADD CONSTRAINT good_til_block_or_good_til_block_time_non_null CHECK (num_nonnulls("goodTilBlock", "goodTilBlockTime") = 1);
    `);
}
exports.up = up;
async function down(knex) {
    return knex
        .schema
        .raw(`
      ALTER TABLE "orders" DROP CONSTRAINT good_til_block_or_good_til_block_time_non_null;
    `);
}
exports.down = down;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyMzAyMDExNzM3MzRfdXBkYXRlX29yZGVyc19hZGRfbm9uX251bGxfY29uc3RyYWludF9nb29kX3RpbF9ibG9ja19nb29kX3RpbF9ibG9ja190aW1lX211dHVhbGx5X2V4Y2x1c2l2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYi9taWdyYXRpb25zL21pZ3JhdGlvbl9maWxlcy8yMDIzMDIwMTE3MzczNF91cGRhdGVfb3JkZXJzX2FkZF9ub25fbnVsbF9jb25zdHJhaW50X2dvb2RfdGlsX2Jsb2NrX2dvb2RfdGlsX2Jsb2NrX3RpbWVfbXV0dWFsbHlfZXhjbHVzaXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLGtGQUFrRjtBQUNsRiw2REFBNkQ7QUFDdEQsS0FBSyxVQUFVLEVBQUUsQ0FBQyxJQUFVO0lBQ2pDLE9BQU8sSUFBSTtTQUNSLE1BQU07U0FDTixHQUFHLENBQUM7O0tBRUosQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQU5ELGdCQU1DO0FBRU0sS0FBSyxVQUFVLElBQUksQ0FBQyxJQUFVO0lBQ25DLE9BQU8sSUFBSTtTQUNSLE1BQU07U0FDTixHQUFHLENBQUM7O0tBRUosQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQU5ELG9CQU1DIn0=