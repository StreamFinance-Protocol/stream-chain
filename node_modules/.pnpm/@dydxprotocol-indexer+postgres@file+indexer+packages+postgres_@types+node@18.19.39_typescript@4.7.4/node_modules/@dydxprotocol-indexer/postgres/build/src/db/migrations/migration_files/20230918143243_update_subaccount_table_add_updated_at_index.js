"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = exports.down = exports.up = void 0;
// Use raw SQL to ensure index creation / deletion does not lock the table
async function up(knex) {
    await knex.raw(`
    CREATE INDEX CONCURRENTLY IF NOT EXISTS "subaccounts_updatedat_index" on "subaccounts" ("updatedAt");
  `);
}
exports.up = up;
async function down(knex) {
    await knex.raw(`
    DROP INDEX CONCURRENTLY IF EXISTS "subaccounts_updatedat_index";
  `);
}
exports.down = down;
// `CONCURRENTLY` cannot be used within a transaction
exports.config = {
    transaction: false,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyMzA5MTgxNDMyNDNfdXBkYXRlX3N1YmFjY291bnRfdGFibGVfYWRkX3VwZGF0ZWRfYXRfaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZGIvbWlncmF0aW9ucy9taWdyYXRpb25fZmlsZXMvMjAyMzA5MTgxNDMyNDNfdXBkYXRlX3N1YmFjY291bnRfdGFibGVfYWRkX3VwZGF0ZWRfYXRfaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsMEVBQTBFO0FBQ25FLEtBQUssVUFBVSxFQUFFLENBQUMsSUFBVTtJQUNqQyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUM7O0dBRWQsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUpELGdCQUlDO0FBRU0sS0FBSyxVQUFVLElBQUksQ0FBQyxJQUFVO0lBQ25DLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQzs7R0FFZCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBSkQsb0JBSUM7QUFFRCxxREFBcUQ7QUFDeEMsUUFBQSxNQUFNLEdBQUc7SUFDcEIsV0FBVyxFQUFFLEtBQUs7Q0FDbkIsQ0FBQyJ9