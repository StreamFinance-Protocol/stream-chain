"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = exports.down = exports.up = void 0;
async function up(knex) {
    // Partial index only when `liquidity` is 'TAKER' as this index is meant to speed up the query to
    // fetch all trades from the database, and we arbitrarily only use 'TAKER' fills for trades to
    // avoid double counting.
    // eslint-disable-next-line @typescript-eslint/quotes
    await knex.raw(`
    CREATE INDEX CONCURRENTLY IF NOT EXISTS "fills_clobPairId_createdAtHeight_partial" ON "fills" ("clobPairId", "createdAtHeight") WHERE "liquidity" = 'TAKER';
  `);
}
exports.up = up;
async function down(knex) {
    await knex.raw(`
    DROP INDEX CONCURRENTLY IF EXISTS "fills_clobPairId_createdAtHeight_partial";
  `);
}
exports.down = down;
exports.config = {
    transaction: false,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyMzA3MDcxMDQ0MjFfY3JlYXRlX2ZpbGxzX2Nsb2JfcGFpcl9pZF9jcmVhdGVkX2F0X2hlaWdodF9pbmRleC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYi9taWdyYXRpb25zL21pZ3JhdGlvbl9maWxlcy8yMDIzMDcwNzEwNDQyMV9jcmVhdGVfZmlsbHNfY2xvYl9wYWlyX2lkX2NyZWF0ZWRfYXRfaGVpZ2h0X2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVPLEtBQUssVUFBVSxFQUFFLENBQUMsSUFBVTtJQUNqQyxpR0FBaUc7SUFDakcsOEZBQThGO0lBQzlGLHlCQUF5QjtJQUN6QixxREFBcUQ7SUFDckQsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDOztHQUVkLENBQUMsQ0FBQztBQUNMLENBQUM7QUFSRCxnQkFRQztBQUVNLEtBQUssVUFBVSxJQUFJLENBQUMsSUFBVTtJQUNuQyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUM7O0dBRWQsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUpELG9CQUlDO0FBRVksUUFBQSxNQUFNLEdBQUc7SUFDcEIsV0FBVyxFQUFFLEtBQUs7Q0FDbkIsQ0FBQyJ9