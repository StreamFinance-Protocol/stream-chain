"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CHILD_SUBACCOUNT_MULTIPLIER = exports.MAX_PARENT_SUBACCOUNTS = exports.DEFAULT_POSTGRES_OPTIONS = exports.CLOB_STATUS_TO_MARKET_STATUS = exports.SQL_TO_JSON_DEFINED_MODELS = exports.TIME_IN_FORCE_TO_API_TIME_IN_FORCE = exports.FUNDING_RATE_FROM_PROTOCOL_IN_HOURS = exports.PPM_EXPONENT = exports.USDC_ASSET_ID = exports.PROTO_TO_CANDLE_RESOLUTION = exports.CANDLE_RESOLUTION_TO_PROTO = exports.NUM_SECONDS_IN_CANDLE_RESOLUTIONS = exports.ONE_MILLION = exports.ZERO_TIME_ISO_8601 = exports.USDC_DENOM = exports.USDC_SYMBOL = exports.QUOTE_CURRENCY_ATOMIC_RESOLUTION = exports.BUFFER_ENCODING_UTF_8 = void 0;
const v4_protos_1 = require("@dydxprotocol-indexer/v4-protos");
const config_1 = __importDefault(require("./config"));
const asset_model_1 = __importDefault(require("./models/asset-model"));
const asset_position_model_1 = __importDefault(require("./models/asset-position-model"));
const fill_model_1 = __importDefault(require("./models/fill-model"));
const funding_index_updates_model_1 = __importDefault(require("./models/funding-index-updates-model"));
const liquidity_tiers_model_1 = __importDefault(require("./models/liquidity-tiers-model"));
const market_model_1 = __importDefault(require("./models/market-model"));
const oracle_price_model_1 = __importDefault(require("./models/oracle-price-model"));
const order_model_1 = __importDefault(require("./models/order-model"));
const perpetual_market_model_1 = __importDefault(require("./models/perpetual-market-model"));
const perpetual_position_model_1 = __importDefault(require("./models/perpetual-position-model"));
const subaccount_model_1 = __importDefault(require("./models/subaccount-model"));
const transfer_model_1 = __importDefault(require("./models/transfer-model"));
const types_1 = require("./types");
exports.BUFFER_ENCODING_UTF_8 = 'utf-8';
// Sourced from protocol https://github.com/dydxprotocol/v4/blob/main/lib/constants.go#L6
exports.QUOTE_CURRENCY_ATOMIC_RESOLUTION = -6;
exports.USDC_SYMBOL = 'USDC';
exports.USDC_DENOM = 'ibc/xxx';
exports.ZERO_TIME_ISO_8601 = '1970-01-01T00:00:00.000Z';
exports.ONE_MILLION = 1000000;
exports.NUM_SECONDS_IN_CANDLE_RESOLUTIONS = {
    [types_1.CandleResolution.ONE_DAY]: 60 * 60 * 24,
    [types_1.CandleResolution.FOUR_HOURS]: 60 * 60 * 4,
    [types_1.CandleResolution.ONE_HOUR]: 60 * 60,
    [types_1.CandleResolution.THIRTY_MINUTES]: 60 * 30,
    [types_1.CandleResolution.FIFTEEN_MINUTES]: 60 * 15,
    [types_1.CandleResolution.FIVE_MINUTES]: 60 * 5,
    [types_1.CandleResolution.ONE_MINUTE]: 60,
};
exports.CANDLE_RESOLUTION_TO_PROTO = {
    [types_1.CandleResolution.ONE_DAY]: v4_protos_1.CandleMessage_Resolution.ONE_DAY,
    [types_1.CandleResolution.FOUR_HOURS]: v4_protos_1.CandleMessage_Resolution.FOUR_HOURS,
    [types_1.CandleResolution.ONE_HOUR]: v4_protos_1.CandleMessage_Resolution.ONE_HOUR,
    [types_1.CandleResolution.THIRTY_MINUTES]: v4_protos_1.CandleMessage_Resolution.THIRTY_MINUTES,
    [types_1.CandleResolution.FIFTEEN_MINUTES]: v4_protos_1.CandleMessage_Resolution.FIFTEEN_MINUTES,
    [types_1.CandleResolution.FIVE_MINUTES]: v4_protos_1.CandleMessage_Resolution.FIVE_MINUTES,
    [types_1.CandleResolution.ONE_MINUTE]: v4_protos_1.CandleMessage_Resolution.ONE_MINUTE,
};
exports.PROTO_TO_CANDLE_RESOLUTION = {
    [v4_protos_1.CandleMessage_Resolution.ONE_DAY]: types_1.CandleResolution.ONE_DAY,
    [v4_protos_1.CandleMessage_Resolution.FOUR_HOURS]: types_1.CandleResolution.FOUR_HOURS,
    [v4_protos_1.CandleMessage_Resolution.ONE_HOUR]: types_1.CandleResolution.ONE_HOUR,
    [v4_protos_1.CandleMessage_Resolution.THIRTY_MINUTES]: types_1.CandleResolution.THIRTY_MINUTES,
    [v4_protos_1.CandleMessage_Resolution.FIFTEEN_MINUTES]: types_1.CandleResolution.FIFTEEN_MINUTES,
    [v4_protos_1.CandleMessage_Resolution.FIVE_MINUTES]: types_1.CandleResolution.FIVE_MINUTES,
    [v4_protos_1.CandleMessage_Resolution.ONE_MINUTE]: types_1.CandleResolution.ONE_MINUTE,
};
exports.USDC_ASSET_ID = '0';
// Parts-per-million exponent, 1 million = 10 ^ 6, exponent to convert from ppm units is 10 ^ -6
exports.PPM_EXPONENT = -6;
// On the protocol, funding is returned in 8 hour increments but we want to store funding in 1 hour
// increments
exports.FUNDING_RATE_FROM_PROTOCOL_IN_HOURS = 8;
exports.TIME_IN_FORCE_TO_API_TIME_IN_FORCE = {
    [types_1.TimeInForce.GTT]: types_1.APITimeInForce.GTT,
    [types_1.TimeInForce.IOC]: types_1.APITimeInForce.IOC,
    [types_1.TimeInForce.FOK]: types_1.APITimeInForce.FOK,
    [types_1.TimeInForce.POST_ONLY]: types_1.APITimeInForce.GTT,
};
// A list of models that have sqlToJsonConversions defined.
exports.SQL_TO_JSON_DEFINED_MODELS = [
    asset_model_1.default,
    asset_position_model_1.default,
    fill_model_1.default,
    funding_index_updates_model_1.default,
    liquidity_tiers_model_1.default,
    market_model_1.default,
    oracle_price_model_1.default,
    order_model_1.default,
    perpetual_market_model_1.default,
    perpetual_position_model_1.default,
    subaccount_model_1.default,
    transfer_model_1.default,
];
exports.CLOB_STATUS_TO_MARKET_STATUS = {
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_ACTIVE]: types_1.PerpetualMarketStatus.ACTIVE,
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_CANCEL_ONLY]: types_1.PerpetualMarketStatus.CANCEL_ONLY,
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_PAUSED]: types_1.PerpetualMarketStatus.PAUSED,
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_POST_ONLY]: types_1.PerpetualMarketStatus.POST_ONLY,
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_INITIALIZING]: types_1.PerpetualMarketStatus.INITIALIZING,
    [v4_protos_1.ClobPairStatus.CLOB_PAIR_STATUS_FINAL_SETTLEMENT]: types_1.PerpetualMarketStatus.FINAL_SETTLEMENT,
};
exports.DEFAULT_POSTGRES_OPTIONS = config_1.default.USE_READ_REPLICA
    ? {
        readReplica: true,
    } : {};
exports.MAX_PARENT_SUBACCOUNTS = 128;
exports.CHILD_SUBACCOUNT_MULTIPLIER = 1000;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uc3RhbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbnN0YW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSwrREFBMkY7QUFFM0Ysc0RBQThCO0FBQzlCLHVFQUE4QztBQUM5Qyx5RkFBK0Q7QUFDL0QscUVBQTRDO0FBQzVDLHVHQUE0RTtBQUM1RSwyRkFBaUU7QUFDakUseUVBQWdEO0FBQ2hELHFGQUEyRDtBQUMzRCx1RUFBOEM7QUFDOUMsNkZBQW1FO0FBQ25FLGlHQUF1RTtBQUN2RSxpRkFBd0Q7QUFDeEQsNkVBQW9EO0FBQ3BELG1DQU1pQjtBQUVKLFFBQUEscUJBQXFCLEdBQW1CLE9BQU8sQ0FBQztBQUU3RCx5RkFBeUY7QUFDNUUsUUFBQSxnQ0FBZ0MsR0FBVyxDQUFDLENBQUMsQ0FBQztBQUU5QyxRQUFBLFdBQVcsR0FBVyxNQUFNLENBQUM7QUFFN0IsUUFBQSxVQUFVLEdBQVcsU0FBUyxDQUFDO0FBRS9CLFFBQUEsa0JBQWtCLEdBQVcsMEJBQTBCLENBQUM7QUFFeEQsUUFBQSxXQUFXLEdBQVcsT0FBUyxDQUFDO0FBRWhDLFFBQUEsaUNBQWlDLEdBQXFDO0lBQ2pGLENBQUMsd0JBQWdCLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO0lBQ3hDLENBQUMsd0JBQWdCLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQzFDLENBQUMsd0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUU7SUFDcEMsQ0FBQyx3QkFBZ0IsQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtJQUMxQyxDQUFDLHdCQUFnQixDQUFDLGVBQWUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFO0lBQzNDLENBQUMsd0JBQWdCLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUM7SUFDdkMsQ0FBQyx3QkFB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