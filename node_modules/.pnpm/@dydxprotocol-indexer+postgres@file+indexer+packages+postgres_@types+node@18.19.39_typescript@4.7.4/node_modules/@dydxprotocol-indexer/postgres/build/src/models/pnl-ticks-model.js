"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const objection_1 = require("objection");
const validators_1 = require("../lib/validators");
class PnlTicksModel extends objection_1.Model {
    static get tableName() {
        return 'pnl_ticks';
    }
    static get idColumn() {
        return 'id';
    }
    static get jsonSchema() {
        return {
            type: 'object',
            required: [
                'id',
                'subaccountId',
                'equity',
                'totalPnl',
                'netTransfers',
                'createdAt',
                'blockHeight',
                'blockTime',
            ],
            properties: {
                id: { type: 'string', format: 'uuid' },
                subaccountId: { type: 'string', format: 'uuid' },
                equity: { type: 'string', pattern: validators_1.NumericPattern },
                totalPnl: { type: 'string', pattern: validators_1.NumericPattern },
                netTransfers: { type: 'string', pattern: validators_1.NumericPattern },
                createdAt: { type: 'string', format: 'date-time' },
                blockHeight: { type: 'string', pattern: validators_1.IntegerPattern },
                blockTime: { type: 'string', format: 'date-time' },
            },
        };
    }
}
exports.default = PnlTicksModel;
PnlTicksModel.relationMappings = {
    subaccount: {
        relation: objection_1.Model.BelongsToOneRelation,
        modelClass: path_1.default.join(__dirname, 'subaccount-model'),
        join: {
            from: 'pnl_ticks.subaccountId',
            to: 'subaccounts.id',
        },
    },
    block_height: {
        relation: objection_1.Model.BelongsToOneRelation,
        modelClass: path_1.default.join(__dirname, 'block-model'),
        join: {
            from: 'pnl_ticks.blockHeight',
            to: 'blocks.blockHeight',
        },
    },
    block_time: {
        relation: objection_1.Model.BelongsToOneRelation,
        modelClass: path_1.default.join(__dirname, 'block-model'),
        join: {
            from: 'pnl_ticks.blockTime',
            to: 'blocks.time',
        },
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG5sLXRpY2tzLW1vZGVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9wbmwtdGlja3MtbW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxnREFBd0I7QUFFeEIseUNBQWtDO0FBRWxDLGtEQUFtRTtBQUduRSxNQUFxQixhQUFjLFNBQVEsaUJBQUs7SUFDOUMsTUFBTSxLQUFLLFNBQVM7UUFDbEIsT0FBTyxXQUFXLENBQUM7SUFDckIsQ0FBQztJQUVELE1BQU0sS0FBSyxRQUFRO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQTZCRCxNQUFNLEtBQUssVUFBVTtRQUNuQixPQUFPO1lBQ0wsSUFBSSxFQUFFLFFBQVE7WUFDZCxRQUFRLEVBQUU7Z0JBQ1IsSUFBSTtnQkFDSixjQUFjO2dCQUNkLFFBQVE7Z0JBQ1IsVUFBVTtnQkFDVixjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsYUFBYTtnQkFDYixXQUFXO2FBQ1o7WUFDRCxVQUFVLEVBQUU7Z0JBQ1YsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO2dCQUN0QyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7Z0JBQ2hELE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLDJCQUFjLEVBQUU7Z0JBQ25ELFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLDJCQUFjLEVBQUU7Z0JBQ3JELFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLDJCQUFjLEVBQUU7Z0JBQ3pELFNBQVMsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRTtnQkFDbEQsV0FBVyxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsMkJBQWMsRUFBRTtnQkFDeEQsU0FBUyxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFO2FBQ25EO1NBQ0YsQ0FBQztJQUNKLENBQUM7O0FBNURILGdDQTZFQztBQXBFUSw4QkFBZ0IsR0FBRztJQUN4QixVQUFVLEVBQUU7UUFDVixRQUFRLEVBQUUsaUJBQUssQ0FBQyxvQkFBb0I7UUFDcEMsVUFBVSxFQUFFLGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGtCQUFrQixDQUFDO1FBQ3BELElBQUksRUFBRTtZQUNKLElBQUksRUFBRSx3QkFBd0I7WUFDOUIsRUFBRSxFQUFFLGdCQUFnQjtTQUNyQjtLQUNGO0lBQ0QsWUFBWSxFQUFFO1FBQ1osUUFBUSxFQUFFLGlCQUFLLENBQUMsb0JBQW9CO1FBQ3BDLFVBQVUsRUFBRSxjQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUM7UUFDL0MsSUFBSSxFQUFFO1lBQ0osSUFBSSxFQUFFLHVCQUF1QjtZQUM3QixFQUFFLEVBQUUsb0JBQW9CO1NBQ3pCO0tBQ0Y7SUFDRCxVQUFVLEVBQUU7UUFDVixRQUFRLEVBQUUsaUJBQUssQ0FBQyxvQkFBb0I7UUFDcEMsVUFBVSxFQUFFLGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQztRQUMvQyxJQUFJLEVBQUU7WUFDSixJQUFJLEVBQUUscUJBQXFCO1lBQzNCLEVBQUUsRUFBRSxhQUFhO1NBQ2xCO0tBQ0Y7Q0FDRixDQUFDIn0=