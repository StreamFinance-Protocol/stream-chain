/**
 * Utilities for writing unit tests with jest.
 */
/// <reference types="jest" />
declare type Fn = (...args: any[]) => any;
declare type FnMock<F extends Fn> = jest.Mock<ReturnType<F>, Parameters<F>>;
declare type ObjMock<T extends {}> = {
    [K in keyof T]: T[K] extends Fn ? FnMock<T[K]> : ObjMock<T[K]>;
};
declare type Module = {
    [param: string]: Fn;
};
declare type ModuleMock<M extends Module> = {
    [K in keyof M]: M[K] extends Fn ? FnMock<M[K]> : ObjMock<M[K]>;
};
/**
 * Allow pending jobs in Node's PromiseJobs queue to run.
 *
 * May be needed when testing tasks triggered by timers.
 *
 * See https://stackoverflow.com/questions/52177631/jest-timer-and-promise-dont-work-well-settimeout-and-async-function
 */
export declare function advancePromiseQueue(n?: number): Promise<void>;
/**
 * Wrap a mocked function or module with the appropriate Jest mock typings.
 */
export declare function asMock<F extends Fn>(mock: F): FnMock<F>;
export declare function asMock<M extends Module>(mock: M): ModuleMock<M>;
/**
 * Mock the value returned by Date.now().
 */
export declare function mockNow(now: Date | number): FnMock<typeof Date.now>;
export {};
