"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const db_helpers_1 = require("../../src/helpers/db-helpers");
const liquidity_tier_refresher_1 = require("../../src/loops/liquidity-tier-refresher");
const constants_1 = require("../helpers/constants");
const mock_generators_1 = require("../helpers/mock-generators");
describe('liquidityTierRefresher', () => {
    beforeAll(async () => {
        await (0, db_helpers_1.migrate)();
        await (0, mock_generators_1.seedData)();
        await (0, liquidity_tier_refresher_1.updateLiquidityTiers)();
    });
    afterAll(async () => {
        await (0, db_helpers_1.clearData)();
        await (0, db_helpers_1.teardown)();
    });
    describe('getLiquidityTierFromId', () => {
        it.each([
            [constants_1.defaultLiquidityTier],
            [constants_1.defaultLiquidityTier2],
        ])('successfully get an liquidityTier from id', (liquidityTier) => {
            expect((0, liquidity_tier_refresher_1.getLiquidityTierFromId)(liquidityTier.id)).toEqual(expect.objectContaining(liquidityTier));
        });
        it('throws error if liquidityTier does not exist', () => {
            expect(() => (0, liquidity_tier_refresher_1.getLiquidityTierFromId)(50)).toThrowError('Unable to find liquidity tier with id: 50');
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlxdWlkaXR5LXRpZXItcmVmcmVzaGVyLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9fX3Rlc3RzX18vbG9vcHMvbGlxdWlkaXR5LXRpZXItcmVmcmVzaGVyLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw2REFBNEU7QUFDNUUsdUZBQXdHO0FBQ3hHLG9EQUFtRjtBQUNuRixnRUFBc0Q7QUFFdEQsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtJQUN0QyxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsTUFBTSxJQUFBLG9CQUFPLEdBQUUsQ0FBQztRQUNoQixNQUFNLElBQUEsMEJBQVEsR0FBRSxDQUFDO1FBQ2pCLE1BQU0sSUFBQSwrQ0FBb0IsR0FBRSxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ2xCLE1BQU0sSUFBQSxzQkFBUyxHQUFFLENBQUM7UUFDbEIsTUFBTSxJQUFBLHFCQUFRLEdBQUUsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7UUFDdEMsRUFBRSxDQUFDLElBQUksQ0FBQztZQUNOLENBQUMsZ0NBQW9CLENBQUM7WUFDdEIsQ0FBQyxpQ0FBcUIsQ0FBQztTQUN4QixDQUFDLENBQUMsMkNBQTJDLEVBQzVDLENBQUMsYUFBeUMsRUFBRSxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxJQUFBLGlEQUFzQixFQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDdEQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUN2QyxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFTCxFQUFFLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1lBQ3RELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLGlEQUFzQixFQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLDJDQUEyQyxDQUFDLENBQUM7UUFDckcsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIn0=