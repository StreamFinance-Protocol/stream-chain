"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.down = exports.up = void 0;
async function up(knex) {
    return knex
        .schema
        .createTable('fills', (table) => {
        table.uuid('id').primary();
        table.uuid('subaccountId').notNullable();
        table.enum('side', [
            'BUY',
            'SELL',
        ]).notNullable();
        table.enum('liquidity', [
            'TAKER',
            'MAKER',
        ]).notNullable();
        table.enum('type', [
            'MARKET',
            'LIMIT',
            'LIQUIDATED',
            'LIQUIDATION',
        ]).notNullable();
        table.bigInteger('clobPairId').notNullable();
        table.uuid('orderId').nullable();
        table.decimal('size', null).notNullable();
        table.decimal('price', null).notNullable();
        table.decimal('quoteAmount', null).notNullable();
        table.binary('eventId', 96).notNullable();
        table.string('transactionHash').notNullable();
        table.timestamp('createdAt').notNullable();
        table.bigInteger('createdAtHeight').notNullable();
        // Foreign
        table.foreign('subaccountId').references('subaccounts.id');
        table.foreign('orderId').references('orders.id');
        // Indices
        table.index(['subaccountId', 'createdAt']);
        table.index(['subaccountId', 'createdAtHeight']);
        table.index(['subaccountId', 'clobPairId']);
        table.index(['clobPairId', 'createdAt']);
        table.index(['orderId']);
    });
}
exports.up = up;
async function down(knex) {
    return knex.schema.dropTableIfExists('fills');
}
exports.down = down;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyMjA3MjcxMzQ5NTRfY3JlYXRlX2ZpbGxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2RiL21pZ3JhdGlvbnMvbWlncmF0aW9uX2ZpbGVzLzIwMjIwNzI3MTM0OTU0X2NyZWF0ZV9maWxscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFTyxLQUFLLFVBQVUsRUFBRSxDQUFDLElBQVU7SUFDakMsT0FBTyxJQUFJO1NBQ1IsTUFBTTtTQUNOLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUM5QixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzNCLEtBQUssQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDekMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDakIsS0FBSztZQUNMLE1BQU07U0FDUCxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDdEIsT0FBTztZQUNQLE9BQU87U0FDUixDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDakIsUUFBUTtZQUNSLE9BQU87WUFDUCxZQUFZO1lBQ1osYUFBYTtTQUNkLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQixLQUFLLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDakMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0MsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzlDLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0MsS0FBSyxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRWxELFVBQVU7UUFDVixLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzNELEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRWpELFVBQVU7UUFDVixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDM0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7UUFDakQsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQzVDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUN6QyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUMzQixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUF6Q0QsZ0JBeUNDO0FBRU0sS0FBSyxVQUFVLElBQUksQ0FBQyxJQUFVO0lBQ25DLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNoRCxDQUFDO0FBRkQsb0JBRUMifQ==