"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const SubaccountTable = __importStar(require("../../src/stores/subaccount-table"));
const TransferTable = __importStar(require("../../src/stores/transfer-table"));
const db_helpers_1 = require("../../src/helpers/db-helpers");
const constants_1 = require("../helpers/constants");
const AssetTable = __importStar(require("../../src/stores/asset-table"));
const BlockTable = __importStar(require("../../src/stores/block-table"));
const TendermintEventTable = __importStar(require("../../src/stores/tendermint-event-table"));
const transaction_1 = __importDefault(require("../../src/helpers/transaction"));
const lodash_1 = __importDefault(require("lodash"));
const luxon_1 = require("luxon");
describe('Subaccount store', () => {
    beforeAll(async () => {
        await (0, db_helpers_1.migrate)();
    });
    afterEach(async () => {
        await (0, db_helpers_1.clearData)();
    });
    afterAll(async () => {
        await (0, db_helpers_1.teardown)();
    });
    it('Successfully creates a Subaccount', async () => {
        await SubaccountTable.create(constants_1.defaultSubaccount);
    });
    it('Successfully finds all Subaccounts', async () => {
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create({
                ...constants_1.defaultSubaccount,
                subaccountNumber: 1,
            }),
        ]);
        const subaccounts = await SubaccountTable.findAll({}, [], { readReplica: true });
        expect(subaccounts.length).toEqual(2);
        expect(subaccounts[0]).toEqual(expect.objectContaining(constants_1.defaultSubaccount));
        expect(subaccounts[1]).toEqual(expect.objectContaining({
            ...constants_1.defaultSubaccount,
            subaccountNumber: 1,
        }));
    });
    it('Successfully finds Subaccount with address', async () => {
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create({
                ...constants_1.defaultSubaccount,
                address: 'fake_address',
            }),
        ]);
        const subaccounts = await SubaccountTable.findAll({
            address: constants_1.defaultSubaccount.address,
        }, [], { readReplica: true });
        expect(subaccounts.length).toEqual(1);
        expect(subaccounts[0]).toEqual(expect.objectContaining(constants_1.defaultSubaccount));
    });
    it('Successfully finds Subaccount with updatedBeforeOrAt', async () => {
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create({
                ...constants_1.defaultSubaccount,
                address: 'fake_address',
                updatedAt: luxon_1.DateTime.fromISO(constants_1.defaultSubaccount.updatedAt).plus(1).toISO(),
            }),
        ]);
        const subaccounts = await SubaccountTable.findAll({
            updatedBeforeOrAt: constants_1.defaultSubaccount.updatedAt,
        }, [], { readReplica: true });
        expect(subaccounts.length).toEqual(1);
        expect(subaccounts[0]).toEqual(expect.objectContaining(constants_1.defaultSubaccount));
    });
    it('Successfully finds Subaccount with updatedOnOrAfter', async () => {
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create({
                ...constants_1.defaultSubaccount,
                address: 'fake_address',
                updatedAt: luxon_1.DateTime.fromISO(constants_1.defaultSubaccount.updatedAt).minus(10).toISO(),
            }),
        ]);
        const subaccounts = await SubaccountTable.findAll({
            updatedOnOrAfter: constants_1.defaultSubaccount.updatedAt,
        }, [], { readReplica: true });
        expect(subaccounts.length).toEqual(1);
        expect(subaccounts[0]).toEqual(expect.objectContaining(constants_1.defaultSubaccount));
    });
    it('Successfully finds a Subaccount', async () => {
        await SubaccountTable.create(constants_1.defaultSubaccount);
        const subaccount = await SubaccountTable.findById(SubaccountTable.uuid(constants_1.defaultAddress, 0));
        expect(subaccount).toEqual(expect.objectContaining(constants_1.defaultSubaccount));
    });
    it('Successfully finds all subaccounts with transfers', async () => {
        const defaultSubaccount3 = {
            address: constants_1.defaultAddress,
            subaccountNumber: 3,
            updatedAt: constants_1.createdDateTime.toISO(),
            updatedAtHeight: constants_1.createdHeight,
        };
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create(constants_1.defaultSubaccount2),
            SubaccountTable.create(defaultSubaccount3),
            BlockTable.create(constants_1.defaultBlock),
            AssetTable.create(constants_1.defaultAsset),
        ]);
        await TendermintEventTable.create(constants_1.defaultTendermintEvent);
        await TransferTable.create(constants_1.defaultTransfer);
        const subaccounts = await SubaccountTable.getSubaccountsWithTransfers(constants_1.defaultTransfer.createdAtHeight);
        const subaccountIds = lodash_1.default.map(subaccounts, 'id');
        expect(subaccountIds).toEqual(expect.arrayContaining([constants_1.defaultSubaccountId, constants_1.defaultSubaccountId2]));
    });
    it('Successfully finds all subaccounts with transfers respects createdAtHeight', async () => {
        const defaultSubaccount3 = {
            address: constants_1.defaultAddress,
            subaccountNumber: 3,
            updatedAt: constants_1.createdDateTime.toISO(),
            updatedAtHeight: constants_1.createdHeight,
        };
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create(constants_1.defaultSubaccount2),
            SubaccountTable.create(defaultSubaccount3),
            BlockTable.create(constants_1.defaultBlock),
            AssetTable.create(constants_1.defaultAsset),
        ]);
        await TendermintEventTable.create(constants_1.defaultTendermintEvent);
        await TransferTable.create(constants_1.defaultTransfer);
        const subaccounts = await SubaccountTable.getSubaccountsWithTransfers('1');
        const subaccountIds = lodash_1.default.map(subaccounts, 'id');
        expect(subaccountIds.length).toEqual(0);
    });
    it('Successfully finds all subaccounts with transfers respects options', async () => {
        const defaultSubaccount3 = {
            address: constants_1.defaultAddress,
            subaccountNumber: 3,
            updatedAt: constants_1.createdDateTime.toISO(),
            updatedAtHeight: constants_1.createdHeight,
        };
        await Promise.all([
            SubaccountTable.create(constants_1.defaultSubaccount),
            SubaccountTable.create(constants_1.defaultSubaccount2),
            SubaccountTable.create(defaultSubaccount3),
            BlockTable.create(constants_1.defaultBlock),
            AssetTable.create(constants_1.defaultAsset),
        ]);
        await TendermintEventTable.create(constants_1.defaultTendermintEvent);
        await TransferTable.create(constants_1.defaultTransfer);
        const txId = await transaction_1.default.start();
        const subaccounts = await SubaccountTable.getSubaccountsWithTransfers(constants_1.defaultTransfer.createdAtHeight, { txId, readReplica: true });
        const subaccountIds = lodash_1.default.map(subaccounts, 'id');
        await transaction_1.default.rollback(txId);
        expect(subaccountIds).toEqual(expect.arrayContaining([constants_1.defaultSubaccountId, constants_1.defaultSubaccountId2]));
    });
    it('Unable finds a Subaccount', async () => {
        const subaccount = await SubaccountTable.findById(SubaccountTable.uuid(constants_1.defaultAddress, 0));
        expect(subaccount).toEqual(undefined);
    });
    it('Successfully creates a Subaccount with updatedAtHeight', async () => {
        await BlockTable.create(constants_1.defaultBlock);
        await SubaccountTable.create({
            ...constants_1.defaultSubaccount,
            updatedAtHeight: constants_1.defaultBlock.blockHeight,
            updatedAt: constants_1.defaultBlock.time,
        });
        const subaccount = await SubaccountTable.findById(SubaccountTable.uuid(constants_1.defaultAddress, 0));
        expect(subaccount).toEqual(expect.objectContaining({
            ...constants_1.defaultSubaccount,
            updatedAtHeight: constants_1.defaultBlock.blockHeight,
            updatedAt: constants_1.defaultBlock.time,
        }));
    });
    it('Successfully updates a Subaccount with updatedAtHeight', async () => {
        await Promise.all([
            BlockTable.create(constants_1.defaultBlock),
            BlockTable.create(constants_1.defaultBlock2),
        ]);
        await SubaccountTable.create({
            ...constants_1.defaultSubaccount,
            updatedAtHeight: constants_1.defaultBlock.blockHeight,
            updatedAt: constants_1.defaultBlock.time,
        });
        const subaccounts = await SubaccountTable.findAll({}, [], { readReplica: true });
        expect(subaccounts.length).toEqual(1);
        await SubaccountTable.update({
            id: constants_1.defaultSubaccountId,
            updatedAtHeight: constants_1.defaultBlock2.blockHeight,
            updatedAt: constants_1.defaultBlock2.time,
        });
        const subaccount = await SubaccountTable.findById(SubaccountTable.uuid(constants_1.defaultAddress, 0));
        expect(subaccount).toEqual(expect.objectContaining({
            ...constants_1.defaultSubaccount,
            updatedAtHeight: constants_1.defaultBlock2.blockHeight,
            updatedAt: constants_1.defaultBlock2.time,
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ViYWNjb3VudC10YWJsZS50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vX190ZXN0c19fL3N0b3Jlcy9zdWJhY2NvdW50LXRhYmxlLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLG1GQUFxRTtBQUNyRSwrRUFBaUU7QUFDakUsNkRBQTRFO0FBQzVFLG9EQWE4QjtBQUM5Qix5RUFBMkQ7QUFDM0QseUVBQTJEO0FBQzNELDhGQUFnRjtBQUNoRixnRkFBd0Q7QUFDeEQsb0RBQXVCO0FBQ3ZCLGlDQUFpQztBQUVqQyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO0lBQ2hDLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNuQixNQUFNLElBQUEsb0JBQU8sR0FBRSxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLE1BQU0sSUFBQSxzQkFBUyxHQUFFLENBQUM7SUFDcEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbEIsTUFBTSxJQUFBLHFCQUFRLEdBQUUsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxLQUFLLElBQUksRUFBRTtRQUNqRCxNQUFNLGVBQWUsQ0FBQyxNQUFNLENBQUMsNkJBQWlCLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxLQUFLLElBQUksRUFBRTtRQUNsRCxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDaEIsZUFBZSxDQUFDLE1BQU0sQ0FBQyw2QkFBaUIsQ0FBQztZQUN6QyxlQUFlLENBQUMsTUFBTSxDQUFDO2dCQUNyQixHQUFHLDZCQUFpQjtnQkFDcEIsZ0JBQWdCLEVBQUUsQ0FBQzthQUNwQixDQUFDO1NB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